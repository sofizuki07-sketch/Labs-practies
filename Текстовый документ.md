# НОРМЛабораторная работа № 3

## Тема: Объединения и перечисления

### Задача 1

#### Постановка задачи указатель на объединение

Напишите программу, которая использует указатель на некоторое
объединение (union). Создайте и проинициализируйте переменные в
объединении через указатель, затем выведите их значения на экран. \####
Список идентификаторов

| Имя переменной | Тип данных | Описание и смысл |
|----|----|----|
| Data | union | Объединение (его основное имя) |
| i | int | Целое число, хранящееся в области памяти объединения |
| f | float | Дробное число, хранящееся в области памяти объединения |
| str | char\[20\] | Строка, хранящаяся в области памяти объединения |
| test | union Data | Переменная для доступа к объединению |
| ptr | union Data \* | Указатель на переменную объединения (на объединение) |

#### Код программы

``` c
#include <stdio.h> 
#include <string.h>

union Data{ // создаём само объединение 
    int i; 
    float f; 
    char 
    str[20]; ;
};

int main (){

    union Data test; // создаём переменную объединения
    union Data *ptr = &test; // делаем указатель на неё

    ptr->i = 100; // заполняем целое число и выводим 
    printf("В объединении сейчас тип int: i = %d\n", ptr->i);

    ptr->f = 1.567;// заполняем дробное число и выводим 
    printf("В объединении сейчас тип float: f = %f\n", ptr->f);

    strcpy(ptr->str, "Hello there!"); // заполняем строку и выводим 
    printf("В объединении сейчас тип char: str = %s\n", ptr->str);

    return 0;
}
```

#### Результат работы программы

![Снимок экрана 2025-10-07
200142.png](......\Pictures\Screenshots\Снимок%20экрана%202025-10-07%20200142.png)
\### Задача 3 - перечисление дней недели \#### Постановка задачи
Создайте перечислимый тип данных (enum) для семи дней недели. Реализуйте
программу, которая выводит на экран значения каждого дня недели как
целое число. \#### Список идентификаторов \| Имя переменной \| Тип
данных \| Описание и смысл \| \|—————-\|————\|————————————-\| \|
DaysOfWeek \| enum \| Перечисление, содержащее дни недели \|

#### Код программы

``` c
#include <stdio.h>

typedef enum{
    MONDAY = 1, 
    TUESDAY, 
    WEDNESDAY,
    THURSDAY, 
    FRIDAY, 
    SATURDAY, 
    SUNDAY 
} DayOfWeek;

int main (){

printf("MONDAY =    %d", MONDAY);
printf("\nTUESDAY =   %d", TUESDAY);
printf("\nWEDNESDAY = %d", WEDNESDAY);
printf("\nTHURSDAY =  %d", THURSDAY);
printf("\nFRIDAY =    %d", FRIDAY);
printf("\nSATURDAY =  %d", SATURDAY);
printf("\nSUNDAY =    %d", SUNDAY);

return 0;
}
```

#### Результат работы программы

![Снимок экрана 2025-10-07
212656.png](......\Pictures\Screenshots\Снимок%20экрана%202025-10-07%20212656.png)
\### Задача 4 - размеченное объединение \#### Постановка задачи Создайте
размеченное объединение (union), которое заключено в структуру.
Структура должна также содержать перечисление (enum), служащее
индикатором того, какой тип данных хранится в объединении на текущий
момент. Создайте динамический массив таких структур и реализуйте функцию
для распечатки их содержимого на экран. \#### Список идентификаторов
(см. задача 8) \| Имя переменной \| Тип данных \| Описание и смысл \|
\|—————-\|————\|——————————————————————————-\| \| TypeValue \| enum \|
Перечисление для типов переменных, находящихся в объединении \|  
\| TagUnion \| struct \| Структура, включающая тег и объединение с
местами для переменных. \|  
\| data \| union \| Объединение для хранения и выбора переменной \| \|
i1 \| int \| Переменная целого типа в объединении \|  
\| f1 \| float \| Переменная дробного типа в объединении \|  
\| str \| char \| Переменная символьного типа в объединении \| \| type
\| TypeValue \| Переменная перечисения, в которой будет хранится тег на
тип данных \| \| tu \| TagUnion\* \| Указатель на переменную структуры,
передаётся в функцию печати структуры \| \| len \| int \| Длина массива
из структур, вводимая с клавиатуры \| \| array \| TagUnion\* \|
Указатель на массив структур, для выделения памяти и перемещения по
элементам \|  
\| i \| int \| Параметр цикла \| \| choise \| int \| Переменная для
выбора типа данных вводимого элемента \| \#### Код программы

``` c
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef enum {
    INTEGER,
    FLOAT,
    CHAR
} TypeValue;

typedef struct {
    TypeValue type;
    union{
        int i1;
        float f1;
        char str[20];
    } data;
} TagUnion;

void print_struct(TagUnion *tu){
    switch(tu->type){
        case INTEGER:
            printf("%d ", tu->data.i1);
            break;
        case FLOAT:
            printf("%.3f ", tu->data.f1);
            break;
        case CHAR:
            printf("\"%s\" ", tu->data.str);
            break;
    }
}

int main (){

    int len;
    printf("Введите количество элементов: ");
    scanf("%d", &len);

    TagUnion *array = (TagUnion*)malloc(len * sizeof(TagUnion));

    if (array == NULL){
        printf("Ошибка выделения памяти!\n");
        return 1;
    }

      printf("Справка: (типы данных) 0-int, 1-float, 2-char(string)\n");
    printf("\tВвод элементов\n");
    for(int i = 0; i<len; i++){
        int choise;
        printf("Выберите тип вводимого элемента: ");
        scanf("%d", &choise);
        printf("Введите элемент: ");

        switch(choise){
            case 0:
                array[i].type = INTEGER;
                scanf("%d", &array[i].data.i1);
                continue;
            case 1:
                array[i].type = FLOAT;
                scanf("%f", &array[i].data.f1);
                continue;
            case 2:
                array[i].type = CHAR;
                scanf("%s", &array[i].data.str);
                continue;
            }
        }

    for(int i = 0; i<len;i++)
        print_struct(&array[i]);
  
    free(array);
    return 0;
}
```

#### Результат работы программы

![Снимок экрана 2025-10-07
234528.png](......\Pictures\Screenshots\Снимок%20экрана%202025-10-07%20234528.png)
\### Задача 5 - ввод и хранение данных о студентах \#### Постановка
задачи Создайте структуру, в которой используется объединение для
хранения различных типов данных: например, структура с отдельным полем
для имени студента и отдельное поле – целое число для его возраста либо
строка его возраста словами. Реализуйте программу для динамического
ввода данных о студентах и вывода их на экран. \#### Список
идентификаторов \| Имя переменной \| Тип данных \| Описание и смысл \|
\|—————-\|————\|——————————————————————————–\| \| TypeValue \| enum \|
Перечисление для типов переменных, находящихся в объединении \| \|
TagUnion \| struct \| Структура, включающая тег и объединение с местами
для переменных \| \| data \| union \| Объединение для хранения и выбора
переменной \| \| i1 \| int \| Переменная целого типа в объединении \| \|
f1 \| float \| Переменная дробного типа в объединении \| \| str \|
char\[20\] \| Переменная символьного типа в объединении \| \| type \|
TypeValue \| Переменная перечисления, в которой будет храниться тег на
тип данных \| \| tu \| TagUnion\* \| Указатель на переменную структуры,
передаётся в функцию печати структуры \| \| len \| int \| Длина массива
из структур, вводимая с клавиатуры \| \| array \| TagUnion\* \|
Указатель на массив структур, для выделения памяти и перемещения по
элементам \| \| i \| int \| Параметр цикла \| \| choice \| int \|
Переменная для выбора типа данных вводимого элемента \| \#### Код
программы

``` c
#include <stdio.h> 
#include <stdlib.h> 
#include <string.h>

typedef enum {
    INTEGER,
    CHAR
} TypeValue;

typedef union {
    char str[30];
    int i;
} data;

typedef struct {
    TypeValue type;
    data x;
} Data;

typedef struct {
    Data name;
    Data age;
} Student;

void print_struct(Student *temp, int num) {
    printf("Студент №%d: ", num + 1);
    printf("%s", temp->name.x.str);
    printf("\t%d лет\n", temp->age.x.i);
}

int main() {
    int n;
    printf("Введите количество студентов: ");
    scanf("%d", &n);
    
    int c;
    while ((c = getchar()) != '\n' && c != EOF);

    Student *array = (Student*)malloc(n * sizeof(Student));

    if (array == NULL) {
        printf("Ошибка выделения памяти!\n");
        return 1;
    }

    printf("\t\tВвод данных о студентах:\n");
    for(int i = 0; i < n; i++) {
        
        printf("Введите имя студента: ");
        array[i].name.type = CHAR;
        fgets(array[i].name.x.str, 30, stdin);
        array[i].name.x.str[strcspn(array[i].name.x.str, "\n")] = '\0';
        
        printf("Введите возраст студента: ");
        array[i].age.type = INTEGER;
        scanf("%d", &array[i].age.x.i);
        while ((c = getchar()) != '\n' && c != EOF);
    }

    printf("\t\tВведенные данные о студентах:\n");
    for(int i = 0; i < n; i++) {
        print_struct(&array[i], i);
    }

    free(array);
    return 0;
}
```

#### Результат работы программы

![Снимок экрана 2025-10-08
115013.png](......\Pictures\Screenshots\Снимок%20экрана%202025-10-08%20115013.png)
\### Задача 6 - управление состояниями системы через enum \####
Постановка задачи Используйте перечисление (enum) для управления
состояниями некоторой условной системы, например, старт, стоп, пауза.
Напишите программу, которая изменяет состояние системы и выводит текущее
состояние на экран. \#### Список идентификаторов \| Имя переменной \|
Тип данных \| Описание и смысл \| \|——————-\|—————–\|————————————————\|
\| MinecraftState \| enum \| Перечисление состояний системы \| \|
current_state \| MinecraftState\* \| Указатель на текущее состояние
системы \| \| event \| const char\* \| Указатель на команду, которую
нужно выполнить \| \| state \| MinecraftState \| Переменная перечисления
с состоянием системы \| \#### Код программы

``` c
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef enum {
    CLOSE,
    OPEN, 
    PAUSE
} MinecraftState;

void process_event(MinecraftState* current_state, const char* event) {
    switch (*current_state) {
        case CLOSE:
            if (strcmp(event, "TURN_ON") == 0) {
                *current_state = OPEN;
                printf("Minecraft открылся!! Наслаждайся ;)\n\n");
                printf("**Играем, гуляем**\n\n");
            }
            break;
            
        case OPEN:
            if (strcmp(event, "NEED_STOP") == 0) {
                *current_state = PAUSE;
                printf("Поставлен на паузу...\n\n");
            }
            if (strcmp(event, "TURN_OFF") == 0) {
                *current_state = CLOSE;
                printf("Minecraft закрыт :(\n");
            }
            break;
            
        case PAUSE:
            if (strcmp(event, "GO_ON") == 0) {
                *current_state = OPEN;
                printf("Запуск...\n\n");
                printf("**Играем, гуляем**\n\n");
            }
            if (strcmp(event, "TURN_OFF") == 0) {
                *current_state = CLOSE;
                printf("Minecraft закрыт :(\n");
            }
            break;
    }
}

int main() {
    MinecraftState state = CLOSE;

    printf("...MINECRAFT АВТОЗАПУСК...\n");
    process_event(&state, "TURN_ON");

    printf("Мама зовёт на обед!\n");
    process_event(&state, "NEED_STOP");

    printf(". . .\n");

    printf("Я вернулся!\n");
    process_event(&state, "GO_ON");

    printf("Ой, спать пора уже!\n");
    process_event(&state, "TURN_OFF");

    return 0;
}
```

#### Результат работы программы

![Снимок экрана 2025-10-08
200539.png](......\Pictures\Screenshots\Снимок%20экрана%202025-10-08%20200539.png)
\### Задача 8 - ввод и вывод через enum и union \#### Постановка задачи
Создайте программу, которая позволяет пользователю вводить и выводить
информацию с различными типами данных через перечисления и объединения.
Например, пользователь может выбрать ввод данных как числа или строки, и
программа корректно сохранит и отобразит эти данные. \#### Список
идентификаторов \| Имя переменной \| Тип данных \| Описание и смысл \|
\|—————-\|————\|————————————————————————–\| \| TypeValue \| enum \|
Перечисление для типов переменных, находящихся в объединении \| \|
TagUnion \| struct \| Структура, включающая тег и объединение с местом
для переменных \| \| data \| union \| Объединение для хранения и выбора
переменной \| \| i1 \| int \| Переменная целого типа в объединении \| \|
f1 \| float \| Переменная дробного типа в объединении \| \| str \|
char\[20\] \| Переменная символьного типа в объединении \| \| type \|
TypeValue \| Переменная перечисления, в которой будет хранится тег на
тип данных \| \| tu \| TagUnion\* \| Указатель на переменную структуры,
передаётся в функцию печати структуры \| \| len \| int \| Длина массива
из структур \| \| array \| TagUnion\* \| Указатель на массив структур \|
\| i \| int \| Параметр цикла \| \| choice \| int \| Переменная для
выбора типа данных элемента \| \#### Код программы

``` c
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef enum {
    INTEGER,
    FLOAT, 
    CHAR
} TypeValue;

typedef struct {
    TypeValue type;
    union {
        int i1;
        float f1;
        char str[20];
    } data;
} TagUnion;

void print_struct(TagUnion *tu) {
    switch(tu->type) {
        case INTEGER:
            printf("%d ", tu->data.i1);
            break;
        case FLOAT:
            printf("%.2f ", tu->data.f1);
            break;
        case CHAR:
            printf("\"%s\" ", tu->data.str);
            break;
    }
}

void cleaner() {
    int c;
    while ((c = getchar()) != '\n' && c != EOF);
}

int main() {
    int len;
    printf("Введите количество элементов: ");
    scanf("%d", &len);
    cleaner();

    TagUnion *array = (TagUnion*)malloc(len * sizeof(TagUnion));

    if (array == NULL) {
        printf("Ошибка выделения памяти!\n");
        return 1;
    }

    printf("Справка: (типы данных) 0-int, 1-float, 2-char(string)\n");
    printf("Ввод элементов:\n");
    
    for(int i = 0; i < len; i++) {
        int choice;
        printf("Выберите тип вводимого элемента: ");
        scanf("%d", &choice);
        cleaner();
        printf("Введите элемент: ");

        switch(choice) {
            case 0:
                array[i].type = INTEGER;
                scanf("%d", &array[i].data.i1);
                cleaner();
                break;
            case 1:
                array[i].type = FLOAT;
                scanf("%f", &array[i].data.f1);
                cleaner();
                break;
            case 2:
                array[i].type = CHAR;
                fgets(array[i].data.str, 20, stdin);
                array[i].data.str[strcspn(array[i].data.str, "\n")] = '\0';
                break;
        }
    }

    printf("\nВведенные элементы: ");
    for(int i = 0; i < len; i++) {
        print_struct(&array[i]);
    }
    printf("\n");

    free(array);
    return 0;
}
```

#### Результат работы программы

<figure>
<img
src="......\Pictures\Screenshots\Снимок%20экрана%202025-10-08%20205605.png"
alt="Снимок экрана 2025-10-08 205605.png" />
<figcaption aria-hidden="true">Снимок экрана 2025-10-08
205605.png</figcaption>
</figure>

### Выполнила: Жукова София 1об ПОО
