\# Лабораторная работа № 3

\## Тема: Объединения и перечисления

\### Задача 1 \#### Постановка задачи указатель на объединение Напишите программу, которая использует указатель на некоторое объединение (union). Создайте и проинициализируйте переменные в объединении через указатель, затем выведите их значения на экран. \#### Список идентификаторов \| Имя переменной \| Тип данных \| Описание и смысл \| \|----------------\|--------------\|--------------------------------------------------------\| \| Data \| union \| Объединение (его основное имя) \| \| i \| int \| Целое число, хранящееся в области памяти объединения \| \| f \| float \| Дробное число, хранящееся в области памяти объединения \| \| str \| char \| Строка,хранящаяся в области памяти объединения \| \| test \| union Data \| Переменная для доступа к объединению \| \| ptr \| union Data \* \| Указатель на переменную объединения(на объединение) \| \#### Код программы "'c #include \<stdio.h\> #include \<string.h\>

union Data // создаём само объединение int i; float f; char str\[20\]; ;

int main ()

union Data test; // создаём переменную объединения

union Data \*ptr = &test; // делаем указатель на неё

ptr-\>i = 100; // заполняем целое число и выводим printf(\"В объединении сейчас тип int: i =

ptr-\>f = 1.567;// заполняем дробное число и выводим printf(\"В объединении сейчас тип float: f =

strcpy(ptr-\>str, \"Hello there!\"); // заполняем строку и выводим printf(\"В объединении сейчас тип char: str =

return 0;

"' \#### Результат работы программы \![02725311d0e2de4e04fd362d0651b61c.png\](./02725311d0e2de4e04fd362d0651b61c.png) \### Задача 3 - перечисление дней недели \#### Постановка задачи Создайте перечислимый тип данных (enum) для семи дней недели. Реализуйте программу, которая выводит на экран значения каждого дня недели как целое число. \#### Список идентификаторов \| Имя переменной \| Тип данных \| Описание и смысл \| \|----------------\|------------\|-------------------------------------\| \| DaysOfWeek \| enum \| Перечисление, содержащее дни недели \| \#### Код программы "'c #include \<stdio.h\>

typedef enum MONDAY = 1, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY, SUNDAY DayOfWeek;

int main ()

printf(\"MONDAY = printf(\"TUESDAY = printf(\"WEDNESDAY = printf(\"THURSDAY = printf(\"FRIDAY = printf(\"SATURDAY = printf(\"SUNDAY =

return 0;

"' \#### Результат работы программы \![65d53a4de3bf1d4d8223f30d8c419399.png\](./65d53a4de3bf1d4d8223f30d8c419399.png) \### Задача 4 - размеченное объединение \#### Постановка задачи Создайте размеченное объединение (union), которое заключено в структуру. Структура должна также содержать перечисление (enum), служащее индикатором того, какой тип данных хранится в объединении на текущий момент. Создайте динамический массив таких структур и реализуйте функцию для распечатки их содержимого на экран. \#### Список идентификаторов \| Имя переменной \| Тип данных \| Описание и смысл \| \|----------------\|------------\|-------------------------------------------------------------------------------\| \| TypeValue \| enum \| Перечисление для типов переменных, находящихся в объединении \| \| TagUnion \| struct \| Структура, включающая тег и объединение с местами для переменных. \| \| data \| union \| Объединение для хранения и выбора переменной \| \| i1 \| int \| Переменная целого типа в объединении \| \| f1 \| float \| Переменная дробного типа в объединении \| \| str \| char \| Переменная символьного типа в объединении \| \| type \| TypeValue \| Переменная перечисения, в которой будет хранится тег на тип данных \| \| tu \| TagUnion\* \| Указатель на переменную структуры, передаётся в функцию печати структуры \| \| len \| int \| Длина массива из структур, вводимая с клавиатуры \| \| array \| TagUnion\* \| Указатель на массив структур, для выделения памяти и перемещения по элементам \| \| i \| int \| Параметр цикла \| \| choise \| int \| Переменная для выбора типа данных вводимого элемента \| \#### Код программы "'c #include \<stdio.h\> #include \<stdlib.h\> #include \<string.h\>

typedef enum INTEGER, FLOAT, CHAR TypeValue;

typedef struct TypeValue type; union int i1; float f1; char str\[20\]; data; TagUnion;

void print_struct(TagUnion \*tu) switch(tu-\>type) case INTEGER: printf(\" break; case FLOAT: printf(\" break; case CHAR: printf(\"b̈reak;

int main ()

int len; printf(\"Введите длину массива: \"); scanf(\"

TagUnion \*array = (TagUnion\*)malloc(len \* sizeof(TagUnion));

if (array == NULL) printf(\"Ошибка выделения памяти!\"); return 1;

printf(\" Ввод элементов\"); printf(\"Справка: (типы данных) 0-int, 1-float, 2-char(string)\"); for(int i = 0; i\<len; i++)

int choise; printf(\"Выберите тип вводимого элемента: \"); scanf(\" printf(\"Введите элемент: \");

switch(choise) case 0: array\[i\].type = INTEGER; scanf(\" continue; case 1: array\[i\].type = FLOAT; scanf(\" continue; case 2: array\[i\].type = CHAR; scanf(\" continue;

for(int i = 0; i\<len;i++) print_struct(&array\[i\]);

free(array); return 0;

"' \#### Результат работы программы \![0a9356f8d14873542c7740bedd4d177d.png\](./0a9356f8d14873542c7740bedd4d177d.png) \### Задача 5 - ввод и хранение данных о студентах \#### Постановка задачи Создайте структуру, в которой используется объединение для хранения различных типов данных: например, структура с отдельным полем для имени студента и отдельное поле -- целое число для его возраста либо строка его возраста словами. Реализуйте программу для динамического ввода данных о студентах и вывода их на экран. \#### Список идентификаторов \| Имя переменной \| Тип данных \| Описание и смысл \| \|----------------\|------------\|--------------------------------------------------------------------------\| \| TypeValue \| enum \| Перечисление типов данных \| \| data \| union \| Объединение для обозначения переменных, хранящих значения \| \| Data \| struct \| Структура для хранения отдельных значений вместе с их типами \| \| Student \| struct \| Основная структура даннных о студенте \| \| str \| char \| Переменная объединения для строки (имени) \| \| i1 \| int \| Переменная объединения для целого числа (возраста) \| \| type \| TypeValue \| Переменная перечисления, хранит тип данных от x \| \| x \| data \| Переменная структуры для хранения 1 конкретного значения указанного типа \| \| name \| Data \| Переменная структуры для имени студента \| \| age \| Data \| Переменная структуры для возраста студента \| \| temp \| Student \* \| Указатель на структуру одного студента для вывода его данных \| \| num \| int \| Номер студента по порядку в выводе \| \| n \| int \| Количество студентов, данные которых будут вводиться \| \| c \| int \| Переменная для очистки буффера после scanf и использования fgets \| \| array \| Student \* \| Указатель на динамический массив структур с данными студентов \| \| i \| int \| Параметр цикла \| \#### Код программы "'c #include \<stdio.h\> #include \<stdlib.h\> #include \<string.h\>

typedef enum INTEGER, CHAR TypeValue;

typedef union char str\[30\]; int i; data;

typedef struct TypeValue type; data x; Data;

typedef struct Data name; Data age; Student;

void print_struct(Student \*temp, int num) printf(\"Студент № printf(\"͡

int main ()

int n; printf(\"Введите количество студентов: \"); scanf(\"

int c; while ((c = getchar()) != '' && c != EOF);

Student \*array = (Student\*)malloc(n \* sizeof(Student));

if (array == NULL) printf(\"Ошибка выделения памяти!\"); return 1;

printf(\"͡данных о студентах\"); for(int i = 0; i\<n; i++)

printf(\"Введите имя студента: \"); array\[i\].name.type = CHAR; fgets(array\[i\].name.x.str, 30, stdin); array\[i\].name.x.str\[strcspn(array\[i\].name.x.str, \"\")\] = '';

printf(\"Введите возраст студента: \"); array\[i\].age.type = INTEGER; scanf(\" while ((c = getchar()) != '' && c != EOF);

printf(\"͡данные о студентах:͡͡\"); for(int i = 0; i\<n;i++) print_struct(&array\[i\], i);

free(array); return 0;

"' \#### Результат работы программы \![e8509c0252e696f5ee57464d0259a242.png\](./e8509c0252e696f5ee57464d0259a242.png) \### Задача 6 - управление состояниями системы через enum \#### Постановка задачи Используйте перечисление (enum) для управления состояниями некоторой условной системы, например, старт, стоп, пауза. Напишите программу, которая изменяет состояние системы и выводит текущее состояние на экран. \#### Список идентификаторов \| Имя переменной \| Тип данных \| Описание и смысл \| \|----------------\|-----------------\|-----------------------------------------------\| \| MinecraftState \| enum \| Перечисление состояний системы \| \| current_state \| MinecraftState\* \| Указатель на текущее состояние системы \| \| event \| const char\* \| Указатель на команду, которую нужно выполнить \| \| state \| MinecraftState \| Переменная перечисления с состоянием системы \| \#### Код программы "'c #include \<stdio.h\> #include \<stdlib.h\> #include \<string.h\>

typedef enum OPEN, PAUSE, CLOSE MinecraftState;

void process_event(MinecraftState\* current_state, const char\* event)

switch (\*current_state)

case CLOSE: if (strcmp(event, \"TURN_ON\") == 0) \*current_state = OPEN; printf(\"Minecraft открылся!! Наслаждайся ;)\"); printf(\"\*\*Играем, гуляем\*\*\"); case OPEN: if (strcmp(event, \"NEED_STOP\") == 0) \*current_state = PAUSE; printf(\"Поставлен на паузу\...\"); if (strcmp(event, \"TURN_OFF\") == 0) \*current_state = CLOSE; printf(\"Minecraft закрыт :(\"); break; case PAUSE: if (strcmp(event, \"GO_ON\") == 0) \*current_state = OPEN; printf(\"Запуск\...\"); printf(\"\*\*Играем, гуляем\*\*\"); if (strcmp(event, \"TURN_OFF\") == 0) \*current_state = CLOSE; printf(\"Minecraft закрыт :(\"); break;

int main ()

MinecraftState state = CLOSE;

printf(\"\...MINECRAFT АВТОЗАПУСК\...\"); process_event(&state, \"TURN_ON\");

printf(\"Мама зовёт на обед!\"); process_event(&state, \"NEED_STOP\");

printf(\". . .\");

printf(\"Я вернулся!\"); process_event(&state, \"GO_ON\");

printf(\"Ой, спать пора уже!\"); process_event(&state, \"TURN_OFF\");

return 0;

"' \#### Результат работы программы \![d6f08db76af7d9136ebb2cac359082cb.png\](./d6f08db76af7d9136ebb2cac359082cb.png) \### Задача 8 - ввод и вывод через enum и union \#### Постановка задачи Создайте программу, которая позволяет пользователю вводить и выводить информацию с различными типами данных через перечисления и объединения. Например, пользователь может выбрать ввод данных как числа или строки, и программа корректно сохранит и отобразит эти данные. \#### Список идентификаторов

\| Имя переменной \| Тип данных \| Описание и смысл \| \|----------------\|------------\|--------------------------------------------------------------------------\| \| TypeValue \| enum \| Перечисление для типов переменных, находящихся в объединении \| \| TagUnion \| struct \| Структура, включающая тег и объединение с местом для переменных \| \| data \| union \| Объединение для хранения и выбора переменной \| \| i1 \| int \| Переменная целого типа в объединении \| \| f1 \| float \| Переменная дробного типа в объединении \| \| str \| char \| Переменная символьного типа в объединении \| \| type \| TypeValue \| Переменная перечисления, в которой будет хранится тег на тип данных \| \| tu \| TagUnion\* \| Указатель на переменную структуры, передаётся в функцию печати структуры \| \| len \| int \| Длина массива из структур \| \| array \| TagUnion\* \| Указатель на массив структур \| \| i \| int \| Параметр цикла \| \| choise \| int \| Переменная для выбора типа данных элемента \| \#### Код программы "'c #include \<stdio.h\> #include \<stdlib.h\> #include \<string.h\>

typedef enum INTEGER, FLOAT, CHAR TypeValue;

typedef struct TypeValue type; union int i1; float f1; char str\[20\]; data; TagUnion;

void print_struct(TagUnion \*tu) switch(tu-\>type) case INTEGER: printf(\" break; case FLOAT: printf(\" break; case CHAR: printf(\"b̈reak;

void cleaner() int c; while ((c = getchar()) != '' && c != EOF);

int main ()

int len; printf(\"Введите количество элементов: \"); scanf(\" cleaner();

TagUnion \*array = (TagUnion\*)malloc(len \* sizeof(TagUnion));

if (array == NULL) printf(\"Ошибка выделения памяти!\"); return 1;

printf(\"Справка: (типы данных) 0-int, 1-float, 2-char(string)\"); printf(\"элементов\"); for(int i = 0; i\<len; i++)

int choise; printf(\"Выберите тип вводимого элемента: \"); scanf(\" cleaner(); printf(\"Введите элемент: \");

switch(choise) case 0: array\[i\].type = INTEGER; scanf(\" cleaner(); continue; case 1: array\[i\].type = FLOAT; scanf(\" cleaner(); continue; case 2: array\[i\].type = CHAR; fgets(array\[i\].data.str, 20, stdin); array\[i\].data.str\[strcspn(array\[i\].data.str, \"\")\] = ''; continue;

for(int i = 0; i\<len;i++) print_struct(&array\[i\]);

free(array); return 0;

"' \#### Результат работы программы \![ebda91c3c8dd8048538875be851a4eb3.png\](./ebda91c3c8dd8048538875be851a4eb3.png)

\### Выполнила: Жукова София 1об ПОО
